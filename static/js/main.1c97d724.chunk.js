(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n(19),o=n.n(s),a=n(8),i=n(12),r=n(3),u=n(2),l=(n(26),n(27),n(28),n(0)),d=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(a.b,{className:"buttonHeader",exact:!0,to:"/",activeClassName:"is-active",children:"Home"}),Object(l.jsx)(a.b,{className:"buttonHeader",exact:!0,to:"/post-add",activeClassName:"is-active",children:"Add Post"})]})},j=(n(35),n(21)),b=n.n(j),m=function(t){var e=t.posts,n=t.selectedPostId,c=t.setSelectPost,s=t.removePost;return Object(l.jsxs)("div",{className:"PostsList",children:[Object(l.jsx)("h2",{children:"Posts:"}),0!==e.length?Object(l.jsx)("ul",{className:"PostsList__list",children:e.map((function(t){return Object(l.jsxs)("li",{className:"PostsList__item",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:t.title}),Object(l.jsx)("div",{className:"PostsList__item--body",children:t.body})]}),Object(l.jsx)("button",{type:"button",className:b()({PostList__button:!0,button:!0,button_active:n===t.id}),onClick:function(){c(t.id)},children:n===t.id?"Close":"Open"}),Object(l.jsx)("button",{className:"button",onClick:function(){s(t.id)},children:"Delete"})]},t.id)}))}):"No user posts"]})},p=(n(36),function(t){var e=t.onAdd,n=Object(c.useState)(""),s=Object(r.a)(n,2),o=s[0],a=s[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(""),m=Object(r.a)(b,2),p=m[0],h=m[1],O=function(){a(""),j(""),h("")};return Object(l.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault(),e(o,d,p),O()},children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:o,onChange:function(t){var e=t.target;return a(e.value)},required:!0})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:d,onChange:function(t){var e=t.target;return j(e.value)},required:!0})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:p,onChange:function(t){var e=t.target;return h(e.value)},required:!0})}),Object(l.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),h=(n(37),function(){return Object(l.jsx)("div",{className:"Loader",children:Object(l.jsx)("div",{className:"Loader__content"})})});n(38);function O(t,e){return fetch("".concat("https://mate-api.herokuapp.com").concat(t),e).then((function(t){return t.json()})).then((function(t){return t.data}))}function f(t,e){return O(t,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}function x(t){return O(t,{method:"DELETE"})}var v=function(){return O("/posts")};function _(t){return O("/posts/".concat(t))}function N(t){return e="/posts/".concat(t.id),n={userId:t.userId,title:t.title,body:t.body},O(e,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)});var e,n}var P=function(t){var e=t.selectedPostId,n=t.updatePost,s=Object(c.useState)(null),o=Object(r.a)(s,2),i=o[0],u=o[1],d=Object(c.useState)(""),j=Object(r.a)(d,2),b=j[0],m=j[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),f=O[0],x=O[1];Object(c.useEffect)((function(){_(e).then((function(t){return u(t)})),_(e).then((function(t){return m(t.title)})),_(e).then((function(t){return x(t.body)}))}),[]);return Object(l.jsx)(l.Fragment,{children:i?Object(l.jsxs)("form",{className:"PostUpdate",onSubmit:function(t){t.preventDefault(),n({id:e,userId:i.userId,title:b,body:f}),alert("The post has been updated")},children:[Object(l.jsx)("input",{className:"PostUpdate__input",placeholder:"Enter post title",value:b,onChange:function(t){m(t.target.value)}}),Object(l.jsx)("textarea",{className:"PostUpdate__input",placeholder:"Enter post body",value:f,onChange:function(t){x(t.target.value)},rows:"15"}),Object(l.jsx)("button",{className:"button PostUpdate__button",type:"submit",children:"Confirm"}),Object(l.jsx)(a.b,{className:"button button-link PostUpdate__button",type:"button",to:"/",children:"Cancle"})]}):Object(l.jsx)(h,{})})};n(39);var y=function(t){var e=t.selectedPostId,n=Object(c.useState)(null),s=Object(r.a)(n,2),o=s[0],u=s[1],d=Object(c.useState)(null),j=Object(r.a)(d,2),b=j[0],m=j[1],v=Object(c.useState)(!1),N=Object(r.a)(v,2),P=N[0],y=N[1];Object(c.useEffect)((function(){var t;_(e).then((function(t){return u(t)})),m(null),(t=e,O("/comments?postId=".concat(t))).then((function(t){return m(t)}))}),[e]);var g=function(t){var e;(e=t,x("/comments/".concat(e))).then((function(){m((function(e){return e.filter((function(e){return e.id!==t}))}))}))};return Object(l.jsxs)("div",{className:"PostDetails",children:[Object(l.jsx)(a.b,{to:"/post-update/".concat(e),className:"button",children:"Update post"}),Object(l.jsx)("h2",{children:"Post details:"}),o?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("section",{className:"PostDetails__post",children:[Object(l.jsx)("b",{children:o.title}),Object(l.jsx)("p",{className:"PostDetails__post--body",children:o.body})]}),b?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("section",{className:"PostDetails__comments",children:[0===b.length?"No comments yet":Object(l.jsx)("button",{type:"button",className:"button",onClick:function(){y((function(t){return!t}))},children:P?"Show ".concat(b.length," comments"):"Hide ".concat(b.length," comments")}),!P&&Object(l.jsx)("ul",{className:"PostDetails__list",children:b.map((function(t){return Object(l.jsxs)("li",{className:"PostDetails__list-item",children:[Object(l.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){g(t.id)},children:"X"}),Object(l.jsx)("p",{children:t.name})]},t.id)}))})]}),Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(l.jsx)(p,{onAdd:function(t,n,c){var s;(s={name:t,email:n,body:c,postId:e},f("/comments",s)).then((function(t){m((function(e){return[].concat(Object(i.a)(e),[t])}))}))}})})})]}):Object(l.jsx)(h,{})]}):Object(l.jsx)(h,{})]})},g=(n(40),function(t){var e=t.addPost,n=Object(c.useState)(""),s=Object(r.a)(n,2),o=s[0],a=s[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),d=u[0],j=u[1],b=function(){a(""),j("")};return Object(l.jsxs)("form",{className:"PostAdd",onSubmit:function(t){t.preventDefault(),e({title:o,body:d}),b()},children:[Object(l.jsx)("input",{className:"PostAdd__input",placeholder:"Enter post title",value:o,onChange:function(t){a(t.target.value)}}),Object(l.jsx)("textarea",{className:"PostAdd__input",placeholder:"Enter post body",value:d,onChange:function(t){j(t.target.value)},rows:"15"}),Object(l.jsx)("button",{className:"button PostAdd__button",type:"submit",children:"Confirm"})]})}),C=function(){var t=Object(c.useState)([]),e=Object(r.a)(t,2),n=e[0],s=e[1],o=Object(c.useState)([]),a=Object(r.a)(o,2),j=(a[0],a[1]),b=Object(c.useState)(0),p=Object(r.a)(b,2),h=p[0],_=p[1];Object(c.useEffect)((function(){v().then((function(t){return s(t)})),O("/users").then((function(t){return j(t)}))}),[]);return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App__header",children:Object(l.jsx)(d,{})}),Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/post-add",children:Object(l.jsx)(g,{addPost:function(t){var e;(e=t,f("/posts",{title:e.title,body:e.body})).then((function(t){s((function(e){return[].concat(Object(i.a)(e),[t])}))}))}})}),Object(l.jsx)(u.a,{path:"/post-update/:postId",children:Object(l.jsx)(P,{selectedPostId:h,updatePost:function(t){N(t).then((function(t){s((function(e){return[].concat(Object(i.a)(e),[t])}))}))}})}),Object(l.jsx)(u.a,{path:"/",exact:!0,children:Object(l.jsxs)("main",{className:"App__main",children:[Object(l.jsx)("div",{className:"App__sidebar",children:Object(l.jsx)(m,{posts:n,selectedPostId:h,setSelectPost:function(t){return _(t===h?0:t)},removePost:function(t){var e;(e=t,x("/posts/".concat(e))).then((function(){s((function(e){return e.filter((function(e){return e.id!==t}))}))}))}})}),Object(l.jsx)("div",{className:"App__content",children:h?Object(l.jsx)(y,{selectedPostId:h}):"No selected post"})]})}),Object(l.jsx)("p",{className:"App__notFound",children:"Page not found!"})]})]})};o.a.render(Object(l.jsx)(a.a,{children:Object(l.jsx)(C,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1c97d724.chunk.js.map